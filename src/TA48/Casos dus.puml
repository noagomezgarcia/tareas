@startuml
'https://plantuml.com/class-diagram
left to right direction
skinparam packageStyle rectangle

' Actores
actor "Convidat (Usuari NO registrat)" as Guest
actor "Usuari Registrat" as User
actor "Bibliotecari" as Librarian
actor "Administrador" as Admin

' Herencia de Actores (Jerarquía de permisos)
Guest <|-- User : "Hereda búsqueda"
User <|-- Librarian : "Hereda gestión básica"
Librarian <|-- Admin : "Hereda gestión total"

package "Sistema de Reserves de Biblioteca" {

    ' Casos de Uso - Convidat
    usecase "Alta Usuari (Registrarse)" as UC_AltaUser
    usecase "Consulta Catàleg (Cerca)" as UC_Search
    usecase "Cerca Autor" as UC_SearchAuthor
    usecase "Veure fitxa document/autor" as UC_ViewDetails

    ' Casos de Uso - Usuari Registrat
    usecase "Login / Accés" as UC_Login
    usecase "Gestió Dades Propies" as UC_ManageSelf
    usecase "Fer Reserva" as UC_Reserve
    usecase "Recollir Préstec" as UC_Collect
    usecase "Renovació Préstec" as UC_Renew
    usecase "Veure Històric Préstecs" as UC_History
    usecase "Gestió Llista Favorits" as UC_Favorites
    usecase "Afegir Comentari" as UC_Comment

    ' Casos de Uso - Bibliotecari
    usecase "Gestió Document (Alta/Modificar)" as UC_ManageDoc
    usecase "Gestió Autor (Alta/Modificar)" as UC_ManageAuthor
    usecase "Gestió Notícies (Alta/Mod/Eliminar)" as UC_News

    ' Casos de Uso - Administrador
    usecase "Baixa Usuari (Bloquejar)" as UC_DeleteUser
    usecase "Modificar Tipus Usuari (Privilegis)" as UC_ChangeType
    usecase "Baixa Document (Ocultar)" as UC_DeleteDoc
    usecase "Baixa Autor (Ocultar)" as UC_DeleteAuthor

    ' Relaciones Convidat
    Guest --> UC_Search
    Guest --> UC_SearchAuthor
    Guest --> UC_AltaUser
    UC_Search ..> UC_ViewDetails : include

    ' Relaciones Usuari Registrat
    User --> UC_Login
    User --> UC_ManageSelf
    User --> UC_Reserve
    User --> UC_Collect
    User --> UC_Renew
    User --> UC_History
    User --> UC_Favorites
    User --> UC_Comment

    ' Relaciones Bibliotecari
    Librarian --> UC_ManageDoc
    Librarian --> UC_ManageAuthor
    Librarian --> UC_News

    ' Relaciones Administrador
    Admin --> UC_DeleteUser
    Admin --> UC_ChangeType
    Admin --> UC_DeleteDoc
    Admin --> UC_DeleteAuthor

}
@enduml